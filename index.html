<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialBoost | Checkout PIX Real</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #050506; color: #fff; scroll-behavior: smooth; }
        .glass { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .nav-pill { background: #0f0f11; border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .gradient-text { background: linear-gradient(135deg, #a78bfa, #60a5fa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .loader { border-top-color: #8b5cf6; animation: spin 0.8s linear infinite; border-radius: 50%; border-width: 3px; border-style: solid; border-color: rgba(255,255,255,0.1); border-top-color: #8b5cf6; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased">

    <!-- NAVBAR PILL -->
    <div class="fixed top-6 left-0 w-full z-50 flex justify-center px-4">
        <nav class="nav-pill rounded-full py-2 px-5 flex items-center gap-8">
            <div class="bg-violet-600 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg></div>
            <div class="flex items-center gap-5 text-[10px] font-bold uppercase tracking-widest">
                <a href="#home">Home</a>
                <a href="#compra">Compra</a>
            </div>
            <button class="bg-white text-black px-4 py-2 rounded-full font-black text-[10px] uppercase">Login</button>
        </nav>
    </div>

    <!-- FORMULÁRIO DE COMPRA -->
    <section id="compra" class="min-h-screen pt-48 pb-20 px-6 flex flex-col items-center">
        <div class="max-w-xl w-full">
            <div class="glass p-8 md:p-10 rounded-[40px] shadow-2xl" id="form-box">
                <h2 class="text-2xl font-black mb-8 text-center uppercase tracking-tighter">Fazer Pedido</h2>
                <div class="space-y-5">
                    <input type="text" id="ig_user" placeholder="Seu Instagram (@)" class="w-full bg-black/40 border border-white/10 p-4 rounded-2xl focus:border-violet-500 outline-none font-bold text-white">
                    <select id="servico" class="w-full bg-black/40 border border-white/10 p-4 rounded-2xl focus:border-violet-500 outline-none font-bold text-sm" onchange="calc()">
                        <option value="3.00">Seguidores Premium (R$ 3,00/k)</option>
                        <option value="2.00">Curtidas Reais (R$ 2,00/k)</option>
                    </select>
                    <input type="number" id="qtd" value="1000" class="w-full bg-black/40 border border-white/10 p-4 rounded-2xl focus:border-violet-500 outline-none text-2xl font-black" oninput="calc()">
                    <div class="flex justify-between items-center py-4 border-t border-white/5">
                        <span class="text-gray-500 font-bold uppercase text-xs">Total</span>
                        <span id="total_display" class="text-3xl font-black">R$ 3,00</span>
                    </div>
                    <button onclick="gerarPedidoPIX()" class="w-full bg-white text-black py-5 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-violet-600 hover:text-white transition-all">FINALIZAR COMPRA</button>
                </div>
            </div>

            <!-- TELA DE PAGAMENTO (QR CODE) -->
            <div id="payment-area" class="hidden glass p-8 rounded-[40px] text-center border-violet-500/30">
                <h3 class="font-black text-xl mb-6 uppercase tracking-tighter">Pagamento PIX Real</h3>
                <div class="bg-white p-3 rounded-3xl inline-block mb-6 shadow-2xl">
                    <img id="qr-img" src="" alt="QR Code" class="w-48 h-48">
                </div>
                <div class="bg-black/40 p-4 rounded-2xl border border-white/5 mb-4">
                    <p class="text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-2">Código Copia e Cola</p>
                    <input type="text" id="pix-string" readonly class="w-full bg-transparent text-center text-[10px] font-mono text-violet-400 outline-none">
                </div>
                <button onclick="copyPix()" class="text-[10px] font-bold uppercase text-white underline tracking-widest mb-8 block mx-auto">Copiar Código PIX</button>
                <button onclick="verRecibo()" class="w-full bg-violet-600 py-4 rounded-2xl font-black text-xs uppercase tracking-widest">JÁ PAGUEI</button>
            </div>

            <!-- RECIBO FINAL -->
            <div id="recibo" class="hidden glass p-8 rounded-[40px] border-green-500/20 bg-green-500/[0.02]">
                <h3 class="text-xl font-black mb-8 text-center text-green-500 uppercase">PEDIDO CONFIRMADO!</h3>
                <div class="bg-black/50 p-6 rounded-3xl border border-white/10 font-mono space-y-2">
                    <p id="res-id" class="text-violet-400 font-black text-lg">#6262783</p>
                    <p id="res-serv" class="text-white font-bold text-sm uppercase"></p>
                    <p id="res-val" class="text-white text-sm font-bold"></p>
                    <p id="res-ig" class="text-gray-400 font-bold text-sm pt-2"></p>
                </div>
                <button onclick="window.location.reload()" class="w-full mt-8 py-4 text-gray-600 font-bold text-[10px] uppercase tracking-widest">Novo Pedido</button>
            </div>
        </div>
    </section>

    <!-- LOADING OVERLAY -->
    <div id="loading" class="fixed inset-0 bg-black/90 z-[100] hidden flex-col items-center justify-center">
        <div class="loader w-12 h-12 mb-4"></div>
        <p class="text-[10px] font-bold tracking-[0.4em] text-violet-500">GERANDO PIX REAL...</p>
    </div>

    <script>
        const TOKEN = 'APP_USR-8394492111873854-021902-e86ca9e018e629c7f576b410f0392216-655196197';

        function calc() {
            const qtd = parseInt(document.getElementById('qtd').value) || 0;
            const preco = parseFloat(document.getElementById('servico').value);
            const total = (qtd / 1000) * preco;
            document.getElementById('total_display').innerText = `R$ ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        }

        async function gerarPedidoPIX() {
            const ig = document.getElementById('ig_user').value;
            const total = parseFloat(document.getElementById('total_display').innerText.replace('R$ ', '').replace(',', '.'));

            if(ig.length < 3) return alert("Digite seu Instagram!");

            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('loading').classList.add('flex');

            const paymentData = {
                transaction_amount: total,
                description: `Boost para ${ig}`,
                payment_method_id: 'pix',
                payer: { email: 'contato@social.com', first_name: 'Cliente' }
            };

            try {
                // USANDO PROXY PARA EVITAR ERRO DE CORS
                const response = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent('https://api.mercadopago.com/v1/payments'), {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(paymentData)
                });

                const data = await response.json();

                if(data.point_of_interaction) {
                    document.getElementById('qr-img').src = `data:image/png;base64,${data.point_of_interaction.transaction_data.qr_code_base64}`;
                    document.getElementById('pix-string').value = data.point_of_interaction.transaction_data.qr_code;
                    document.getElementById('form-box').classList.add('hidden');
                    document.getElementById('payment-area').classList.remove('hidden');
                } else {
                    alert("Ocorreu um erro no Mercado Pago. Tente novamente.");
                }
            } catch (err) {
                alert("Erro de conexão. Verifique se o seu Token está correto.");
            } finally {
                document.getElementById('loading').classList.add('hidden');
            }
        }

        function copyPix() {
            const input = document.getElementById('pix-string');
            input.select();
            document.execCommand('copy');
            alert("Código Copiado!");
        }

        function verRecibo() {
            const ig = document.getElementById('ig_user').value;
            const qtd = document.getElementById('qtd').value;
            const serv = document.getElementById('servico').options[document.getElementById('servico').selectedIndex].text.split('(')[0];

            document.getElementById('res-id').innerText = "#" + Math.floor(Math.random() * 9000000 + 1000000);
            document.getElementById('res-serv').innerText = `${qtd} ${serv}`;
            document.getElementById('res-val').innerText = document.getElementById('total_display').innerText;
            document.getElementById('res-ig').innerText = `Ig: ${ig.startsWith('@') ? ig : '@'+ig}`;

            document.getElementById('payment-area').classList.add('hidden');
            document.getElementById('recibo').classList.remove('hidden');
        }
    </script>
</body>
</html>